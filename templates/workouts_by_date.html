<!-- templates/workouts_by_date.html -->
<!DOCTYPE HTML>
<html>
	<head>
		<title>Workouts on {{ selected_date_str | default('Selected Date') }}</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />
		<link rel="stylesheet" href="{{ url_for('static', filename='css/mystyles.css') }}" />
	</head>
	<body class="is-preload">

		<!-- Content -->
			<div id="content" class="custom-fullwidth">
				<div class="inner">
                    <h1 class="extra_h1">Workouts on {{ selected_date_str | default('Selected Date') }}</h1>
                    <hr class="extra_title_line">

					<!-- flash messages -->
						{% with messages = get_flashed_messages(with_categories=true) %}
							{% if messages %}
								<article class="box post post-excerpt">
								{% for category, message in messages %}
									<div class="box alert-{{ category }}" style="font-size: 1.3em; border: 1px solid; padding: 16px; margin-bottom: 20px; text-align: center;">
										{{ message }}
									</div>
								{% endfor %}
								</article>
							{% endif %}
						{% endwith %}
					
					<!-- Workouts -->
						{% if workouts_display_data %}
							{% for item_data in workouts_display_data %}
								{# This article structure is similar to index.html for consistency #}
								{% if not loop.first %}<hr class="extra_article">{% endif %}
								<article class="box post post-excerpt">
									<header style="margin-bottom: 0px; padding-top: 0px;">
										<h2 style="margin-bottom: 5px;"><a href="{{ url_for('details', workout_id=item_data.workout_obj.workout_id) }}">{{ item_data.name | default('Unnamed Workout') }}</a></h2>
									</header>
                                        {# Date display for each workout might be redundant here since all are for the same day, #}
                                        {# but kept for consistency with index.html's article layout. #}
                                        {# You could simplify this if desired or show workout time if available. #}
                                        <table class="workout-stats-table" style="width:auto; margin-bottom: 0.5em;">
                                            <tr>
                                                <th>Distance</th>
                                                <th>Time</th>
                                                <th>Split</th>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <span class="icon distance"></span>
                                                    {{ '{:,.0f}'.format(item_data.workout_obj.total_distance_meters) if item_data.workout_obj.total_distance_meters is not none else 'N/A' }} m
                                                </td>
                                                <td>
                                                    <span class="icon time"></span>
                                                    {{ item_data.workout_obj.duration_seconds | format_total_seconds_human_readable }}
                                                </td>
                                                <td>
                                                    <span class="icon split"></span>
                                                    {{ item_data.workout_obj.average_split_seconds_500m | format_split_ms }}
                                                </td>
                                            </tr>
                                        </table>

									<div id="workout-graph-placeholder-{{ item_data.workout_obj.workout_id }}" style="width:100%; height:250px; background:#f4f7fb; border:1px dashed #b3c6e7; display:flex; align-items:center; justify-content:center; margin: 0px 0;">
										<span style="color:#6a8fd7; font-size:1.2em;">[ Graph for {{ item_data.workout_obj.workout_name | default('Workout') }} (ID: {{ item_data.workout_obj.workout_id }}) ]</span>
									</div>
								</article>
							{% endfor %}
						{% else %}								
							<article class="box post post-excerpt">
								<div class="box alert-info" style="font-size: 1.3em; border: 1px solid; padding: 16px; margin-bottom: 20px; text-align: center;">
									No workouts found for this date.
								</div>
							</article>
						{% endif %}

                    <!-- Back Link -->
                    <div style="text-align: center; margin-top: 30px;">
                        <a href="{{ url_for('dailysummary') }}" class="button">
                            ‚Üê Back to Daily Summary
                        </a>
                    </div>
				</div>
			</div>
		<!-- Sidebar -->
			{% include '_sidebar.html' %}

		<!-- Scripts -->
			<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
			<script src="{{ url_for('static', filename='js/browser.min.js') }}"></script>
			<script src="{{ url_for('static', filename='js/breakpoints.min.js') }}"></script>
			<script src="{{ url_for('static', filename='js/util.js') }}"></script>
			<script src="{{ url_for('static', filename='js/main.js') }}"></script>
	</body>
</html>