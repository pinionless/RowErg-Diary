<!-- ======================================================== -->
<!-- = workouts.html - Template for displaying a list of workouts -->
<!-- ======================================================== -->
<!DOCTYPE HTML>
<html>
	<head>
		<title>RowErg Diary - Workouts</title> <!-- Page Title -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}"> <!-- Favicon Link -->
		<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" /> <!-- Main Stylesheet -->
		<link rel="stylesheet" href="{{ url_for('static', filename='css/mystyles.css') }}" /> <!-- Custom Stylesheet -->
	</head>
	<body class="is-preload">

		<!-- == Main Content Area ============================================ -->
		<div id="content" class="custom-fullwidth">
			<div class="inner">
				<!-- -- Page Header ------------------- -->
				<h1 class="extra_h1">Workouts</h1>
				<hr class="extra_title_line">

				<!-- -- Flash Messages Section ------------------- -->
				{% with messages = get_flashed_messages(with_categories=true) %}
					{% if messages %}
						<article class="box post post-excerpt">
						{% for category, message in messages %}
							<div class="box alert-{{ category }}" style="font-size: 1.3em; border: 1px solid; padding: 16px; margin-bottom: 20px; text-align: center;">
								{{ message }} <!-- Display flash message -->
							</div>
						{% endfor %}
						</article>
					{% endif %}
				{% endwith %}
				
				<!-- -- Workouts Table Section ------------------- -->
				{% if workouts_display_data %} <!-- Check if there are workouts to display -->
					<article class="box post post-excerpt">
						<table>
							<thead>
								<tr>
									<th>Date</th>
									<th>Name</th>
									<th>Distance</th>
									<th>Duration</th>
									<th>Split</th>
									<th>Actions</th>
								</tr>
							</thead>
							<tbody>
								{% for item_data in workouts_display_data %} <!-- Loop through each workout -->
								<tr>
									<td>{{ item_data.workout_obj.workout_date.strftime('%Y-%m-%d') if item_data.workout_obj.workout_date else 'N/A' }}</td> <!-- Workout Date -->
									<td><a href="{{ url_for('details', workout_id=item_data.workout_obj.workout_id) }}">{{ item_data.workout_obj.workout_name | default('Unnamed Workout') }}</a></td> <!-- Workout Name (link to details) -->
									
									<!-- Data cells using Jinja filters for formatting -->
									<td>{{ '{:,.0f}'.format(item_data.workout_obj.total_distance_meters) if item_data.workout_obj.total_distance_meters is not none else 'N/A' }} m</td> <!-- Total Distance -->
									<td>{{ item_data.workout_obj.duration_seconds | format_total_seconds_human_readable }}</td> <!-- Duration -->
									<td>{{ item_data.workout_obj.average_split_seconds_500m | format_split_ms }}</td> <!-- Average Split -->
									
									<td>
										<a href="{{ url_for('details', workout_id=item_data.workout_obj.workout_id) }}">
											<i class="fas fa-eye"></i> Details <!-- Link to workout details page -->
										</a>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</article>
					
				{% else %} <!-- If no workouts are found -->							
					<article class="box post post-excerpt">
						<div class="box alert-info" style="font-size: 1.3em; border: 1px solid; padding: 16px; margin-bottom: 20px; text-align: center;">
							No workouts found. <!-- Message indicating no workouts -->
						</div>
					</article>
					<p></p>
				{% endif %}

				<!-- -- Pagination Section ------------------- -->
				{% if workouts_pagination.pages > 1 %} <!-- Check if pagination is needed -->
					<div class="pagination">
						<!-- Previous Page Button -->
						{% if workouts_pagination.has_prev %}
							<a href="{{ url_for('workouts_paginated', page_num=workouts_pagination.prev_num) }}"
							   class="button previous">Previous Page</a>
						{% else %}
							<span class="button previous disabled" aria-disabled="true">Previous Page</span>
						{% endif %}
						
						<!-- Page Numbers -->
						<div class="pages">
							{% for page in workouts_pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
								{% if page %}
									<a href="{{ url_for('workouts_paginated', page_num=page) }}"
									   class="{% if page == workouts_pagination.page %}active{% endif %}">{{ page }}</a>
								{% else %}
									<span>â€¦</span> <!-- Ellipsis for skipped pages -->
								{% endif %}
							{% endfor %}
						</div>
						
						<!-- Next Page Button -->
						{% if workouts_pagination.has_next %}
							<a href="{{ url_for('workouts_paginated', page_num=workouts_pagination.next_num) }}"
							   class="button next">Next Page</a>
						{% else %}
							<span class="button next disabled" aria-disabled="true">Next Page</span>
						{% endif %}
					</div>
				{% endif %}
			</div>
		</div>
		<!-- == Sidebar Inclusion ============================================ -->
		{% include '_sidebar.html' %} <!-- Include the sidebar template -->

		<!-- == Scripts ============================================ -->
		<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/browser.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/breakpoints.min.js') }}"></script>
		<script src="{{ url_for('static', filename='js/util.js') }}"></script>
		<script src="{{ url_for('static', filename='js/main.js') }}"></script>
	</body>
</html>